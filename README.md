# 剣道大会管理システム

## システム概要

本サービスは、剣道大会におけるクラブ単位での大会運営および記録管理を支援するWebシステムです。すべてのユーザは必ずクラブに所属し、「管理者」「参加者」のいずれかのロールを持ちます。大会の主催はクラブ単位で行われ、ユーザ個人としての大会作成は行いません。

また、大会の公式結果とは別に、ユーザ自身が非公式な個人・チームの記録として結果を登録・管理できる仕組みを提供します。

## 主要機能

### 1. アカウント管理機能
- ユーザ登録・ログイン・ログアウト
- パスワード再設定
- プロフィール管理
- JWT認証（24時間有効）
- メール認証必須

### 2. クラブ管理機能
- クラブ作成・参加申請・承認
- 複数クラブ所属対応
- 所属クラブ切り替え機能
- ロール管理（管理者・参加者）
- 招待URL機能
- クラブ内通知機能

### 3. 大会主催管理機能（管理者専用）
- 大会作成・編集・削除
- エントリー受付管理
- トーナメント表作成（自動・手動）
- 試合結果入力・公開
- 大会ステータス管理

### 4. 大会参加管理機能（管理者専用）
- チームエントリー申請
- 選手登録（先鋒～大将）
- エントリー内容編集
- キャンセル申請
- 参加状況確認

### 5. 大会閲覧機能
- 大会一覧・詳細表示
- トーナメント表閲覧
- 試合結果閲覧
- 検索・絞り込み機能
- リアルタイム更新対応

### 6. 記録管理機能
- **個人戦記録の登録・管理**
  - 個人戦結果の入力
  - スコア記録（メ・コ・ド・ツ・反・不）
  - 記録の編集・削除
- **団体戦記録の登録・管理**
  - 団体戦結果の入力（先鋒～大将）
  - チーム構成管理
  - 記録の編集・削除
- **チームテンプレート機能**
  - よく使用するチーム構成の事前登録
  - テンプレートからの自動入力
  - 最大20個まで登録可能
- **公開設定**
  - デフォルト：自分のみ閲覧可能
  - 所属クラブへの公開設定可能

### 7. お知らせ機能
- 運営からのお知らせ配信・閲覧
- お知らせの削除・ブックマーク
- 全体または条件付き配信

## 技術仕様

### セキュリティ
- パスワードハッシュ化（BCrypt）
- JWT認証（24時間有効）
- ログイン試行回数制限
- メール認証必須

### 剣道ルール準拠
- **取得本数としてカウント**: メ・コ・ド・ツ・反・不（不戦勝=2本）
- **反則（▲）**: 最大1つまで記録、2つ目で相手に反則1本付与
- **引き分け条件**: 両者0本または1本同士（反則は無関係）

## ユーザ分類

### 全ユーザ共通
- アカウント管理
- クラブ参加申請
- 大会閲覧
- 記録管理（個人・団体戦）
- お知らせ閲覧

### 管理者専用
- クラブ管理（参加承認・ロール変更）
- 大会主催（作成・運営・結果公開）
- 大会参加申請（チームエントリー）
- クラブ内通知送信

## ディレクトリ構成

```
docs/adoc/basicDesigns/
├── basicDesignList.adoc       # システム概要・機能一覧
├── accountManagement.adoc     # アカウント管理機能
├── clubManagement.adoc        # クラブ管理機能
├── tournamentHostingManagement.adoc    # 大会主催管理機能
├── tournamentParticipationManagement.adoc  # 大会参加管理機能
├── tournamentViewing.adoc     # 大会閲覧機能
├── recordManagement.adoc      # 記録管理機能
├── teamTemplate.adoc          # チームテンプレート機能
└── notification.adoc          # お知らせ機能
```

## 特徴

- **クラブ中心の設計**: 個人ではなくクラブ単位での大会運営
- **柔軟な記録管理**: 公式・非公式問わず自由な記録登録
- **マルチクラブ対応**: 1ユーザが複数クラブに所属可能
- **リアルタイム更新**: 進行中大会の状況をリアルタイム反映
- **剣道ルール準拠**: 正確なスコア計算と判定システム
- **モバイル対応**: PC・スマートフォン両対応

## 初版実装範囲

- 個人戦・団体戦記録管理機能を含む全機能を実装
- チームテンプレート機能による効率的な入力支援
- JWT認証によるセキュアなアクセス制御
- 招待URL機能による簡単なクラブ参加