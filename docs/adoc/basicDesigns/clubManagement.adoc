== クラブ管理機能

=== 機能概要

ユーザはクラブに所属することで大会の主催や参加が可能となる。本サービスでは1ユーザが複数のクラブに所属可能であり、UI上で操作対象クラブを切り替えることで、それぞれのクラブの情報・機能にアクセスできる。

クラブはユーザによって作成され、作成者は自動的に管理者として登録される。また、管理者は自クラブ内の他ユーザのロールを「管理者／参加者」間で変更可能である。

クラブ名は重複可能とし、IDによって一意に識別される。クラブ参加は申請制とし、初版より招待URL機能を搭載する。

=== 詳細設計書

本機能の詳細な技術仕様については、以下の詳細設計書を参照すること：

==== 共通定義
* link:../clubManagement/common-definitions.adoc[クラブ管理機能 共通定義]

==== 主要機能
* link:../clubManagement/create-club.adoc[クラブ作成API 詳細設計書]
* link:../clubManagement/join-request.adoc[クラブ参加申請API 詳細設計書]
* link:../clubManagement/join-approval.adoc[クラブ参加承認・拒否API 詳細設計書]
* link:../clubManagement/switch-club.adoc[クラブ切り替えAPI 詳細設計書]
* link:../clubManagement/role-management.adoc[ロール管理API 詳細設計書]

=== 対象ユーザ

全ユーザ（ただし管理操作はクラブ管理者に限定）

=== 機能一覧と詳細

[cols="1,2,2", options="header"]
|===
| 機能名 | 説明 | 条件・補足

| クラブ作成
| 新しいクラブを作成し、作成者が管理者となる
| * クラブ名重複可（IDで一意識別）  
  * 招待URL自動生成（初版対応）

| クラブ参加申請
| 既存クラブへの参加申請を行う
| * クラブ検索または招待URLで申請

| クラブ参加承認・拒否
| 管理者が参加申請を承認または拒否する
| * 承認後、そのクラブが所属対象として追加される

| 所属クラブ切り替え
| 所属クラブを切り替えて操作対象を変更
| * UI上で選択  
  * 初期値は「最後に使用したクラブ」

| クラブメンバーのロール管理
| メンバーのロール（管理者／参加者）を切り替える
| * 自クラブ内のみ操作可  
  * 管理者は複数可

| クラブ宛てお知らせ送信
| 所属クラブ内ユーザに通知を一斉送信する
| * UI通知またはメール通知

| クラブ退会
| ユーザが自発的にクラブから退会できる
| * 再申請は即時可能。クールタイムなし

| クラブ削除
| クラブそのものを削除する
| * クラブ所属「全管理者の同意」が必要
|===

=== 補足仕様

* 通知方法：クラブ参加承認はメール通知またはアプリ内通知で行う
* 招待URL仕様：有効期限は1時間、URLは一度のみ有効
* クラブ退会／再申請：ユーザは自発的にクラブを退会可能。再申請は制限なし
* クラブ削除：所属管理者全員の承認をもって削除が可能とする
* クラブ切替の初期値：ログイン時または画面遷移時に、最後に使用したクラブを自動で選択状態とする